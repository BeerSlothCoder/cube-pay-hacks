# ============================================================================
# Circle Arc Gateway Configuration Template
# ============================================================================
# Copy this file to .env and fill in your values
# Date: 2026-02-08
# For: Phase 1 Arc Integration Foundation
# ============================================================================

# ============================================================================
# 1. Circle API Configuration
# ============================================================================

# Circle API Key (from Circle Dashboard)
# Get from: https://dashboard.circle.com/developers/api-keys
CIRCLE_API_KEY=your_circle_api_key_here

# Circle API Endpoints
# Sandbox (Testnet)
CIRCLE_API_BASE_URL_TESTNET=https://api-sandbox.circle.com

# Production (Mainnet)
CIRCLE_API_BASE_URL_MAINNET=https://api.circle.com

# Current API base (set based on NODE_ENV)
CIRCLE_API_BASE_URL=${CIRCLE_API_BASE_URL_TESTNET}

# Circle App ID (identifies your application)
CIRCLE_APP_ID=cubepay-testnet

# Circle Webhook Secret (for transfer confirmations)
CIRCLE_WEBHOOK_SECRET=your_webhook_secret_here

# ============================================================================
# 2. Arc Gateway Configuration
# ============================================================================

# Enable/disable Arc Gateway globally
ARC_GATEWAY_ENABLED=true

# Default gateway fee percentage (0.1 = 0.1%)
ARC_DEFAULT_FEE_PERCENTAGE=0.1

# USDC contract address registry file
ARC_USDC_CONFIG_FILE=./src/config/arc-usdc-contracts.json

# Maximum concurrent transfers to process
ARC_MAX_CONCURRENT_TRANSFERS=10

# Transfer timeout in milliseconds
ARC_TRANSFER_TIMEOUT_MS=60000

# ============================================================================
# 3. Environment Configuration
# ============================================================================

# Node environment
NODE_ENV=development

# Enable testnet mode (uses Sepolia, Base Sepolia, etc.)
ARC_TESTNET_MODE=true

# Enable debug logging
ARC_DEBUG_MODE=false

# ============================================================================
# Arc Testnet Configuration (HackMoney 2026) - ACTIVE NOW
# ============================================================================

# Arc Testnet RPC Endpoints
# Chain ID: 5042002 | Currency: USDC (6 decimals) | Finality: <350ms
ARC_TESTNET_RPC_PRIMARY=https://rpc.testnet.arc.network
ARC_TESTNET_RPC_BACKUP1=https://rpc.blockdaemon.testnet.arc.network
ARC_TESTNET_RPC_BACKUP2=https://rpc.drpc.testnet.arc.network
ARC_TESTNET_CHAIN_ID=5042002
ARC_TESTNET_EXPLORER=https://testnet.arcscan.app

# Arc Testnet USDC Faucet (for getting test funds)
ARC_TESTNET_FAUCET_URL=https://faucet.circle.com/
ARC_TESTNET_FAUCET_DAILY_LIMIT=1000    # USDC per day
ARC_TESTNET_FAUCET_MIN_REQUEST=0.01    # Minimum request
ARC_TESTNET_FAUCET_MAX_REQUEST=100     # Maximum per request

# MetaMask Setup (Manual or via ChainList at https://chainlist.org)
# Option A: Add manually to MetaMask with above RPC URL
# Option B: Search "Arc Testnet" on chainlist.org and one-click add
# Then get testnet USDC from faucet above

# ============================================================================
# Arc Mainnet Configuration (Coming 2026)
# ============================================================================

# Arc Mainnet will launch later in 2026
# Uncomment and update when available
# ARC_MAINNET_RPC=https://rpc.arc.network
# ARC_MAINNET_CHAIN_ID=1243  # TBD - verify at launch
# ARC_MAINNET_EXPLORER=https://arcscan.app

# ============================================================================
# ============================================================================

# Sepolia (Ethereum Testnet)
SEPOLIA_RPC=https://rpc.sepolia.org
SEPOLIA_CHAIN_ID=11155111

# Base Sepolia
BASE_SEPOLIA_RPC=https://sepolia.base.org
BASE_SEPOLIA_CHAIN_ID=84532

# Arbitrum Sepolia
ARBITRUM_SEPOLIA_RPC=https://sepolia-rollup.arbitrum.io/rpc
ARBITRUM_SEPOLIA_CHAIN_ID=421614

# Optimism Sepolia
OPTIMISM_SEPOLIA_RPC=https://sepolia.optimism.io
OPTIMISM_SEPOLIA_CHAIN_ID=11155420

# Polygon Amoy
POLYGON_AMOY_RPC=https://rpc-amoy.maticvigil.com
POLYGON_AMOY_CHAIN_ID=80002

# Avalanche Fuji
AVALANCHE_FUJI_RPC=https://api.avax-test.network/ext/bc/C/rpc
AVALANCHE_FUJI_CHAIN_ID=43113

# ============================================================================
# 5. RPC Endpoints (Mainnet - Production)
# ============================================================================
# Uncomment and fill in when deploying to production

# Ethereum Mainnet
# ETHEREUM_RPC=https://eth.llamarpc.com
# ETHEREUM_CHAIN_ID=1

# Arbitrum Mainnet
# ARBITRUM_RPC=https://arb1.arbitrum.io/rpc
# ARBITRUM_CHAIN_ID=42161

# Base Mainnet
# BASE_RPC=https://mainnet.base.org
# BASE_CHAIN_ID=8453

# Optimism Mainnet
# OPTIMISM_RPC=https://mainnet.optimism.io
# OPTIMISM_CHAIN_ID=10

# Polygon Mainnet
# POLYGON_RPC=https://polygon-rpc.com
# POLYGON_CHAIN_ID=137

# Avalanche Mainnet
# AVALANCHE_RPC=https://api.avax.network/ext/bc/C/rpc
# AVALANCHE_CHAIN_ID=43114

# ============================================================================
# 6. Monitoring & Logging
# ============================================================================

# Arc transfer logging level
# Options: debug, info, warn, error
ARC_TRANSFER_LOG_LEVEL=info

# Enable Circle API request/response logging
ARC_ENABLE_API_LOGGING=false

# Enable transfer status polling logs
ARC_ENABLE_POLLING_LOGS=false

# Enable webhook event logging
ARC_ENABLE_WEBHOOK_LOGS=true

# Log file location
ARC_LOG_FILE=./logs/arc-transfers.log

# ============================================================================
# 7. Webhooks Configuration
# ============================================================================

# Enable webhook support for transfer confirmations
ARC_ENABLE_TRANSFER_WEBHOOKS=false

# Webhook URL (where Circle sends transfer confirmations)
# Set to your backend endpoint, e.g.: https://api.cubepay.com/webhooks/arc
ARC_WEBHOOK_URL=

# Webhook endpoint path (relative to your backend)
ARC_WEBHOOK_PATH=/webhooks/arc/transfers

# Webhook timeout in milliseconds
ARC_WEBHOOK_TIMEOUT_MS=10000

# ============================================================================
# 8. Database Configuration (for Arc metadata)
# ============================================================================

# Database host
DB_HOST=localhost

# Database port
DB_PORT=5432

# Database name
DB_NAME=cubepay

# Database user
DB_USER=cubepay_user

# Database password
DB_PASSWORD=your_db_password

# ============================================================================
# 9. Feature Flags (Gradual Rollout)
# ============================================================================

# Percentage of payments to route through Arc (0-100)
# 0 = Always use CCIP (fallback)
# 50 = 50/50 Arc and CCIP
# 100 = Always use Arc
ARC_TRAFFIC_PERCENTAGE=100

# Enable Arc for POS terminals
ARC_ENABLE_POS=true

# Enable Arc for AR Viewer (MyTerminal)
ARC_ENABLE_AR_VIEWER=true

# Enable Arc for ARTM (virtual ATMs)
ARC_ENABLE_ARTM=true

# ============================================================================
# 10. Performance & Limits
# ============================================================================

# Maximum USDC amount per transfer
ARC_MAX_TRANSFER_AMOUNT=1000000

# Minimum USDC amount per transfer
ARC_MIN_TRANSFER_AMOUNT=0.01

# Maximum daily transfer volume (per user)
ARC_MAX_DAILY_VOLUME_PER_USER=100000

# Rate limiting: max transfers per minute (per user)
ARC_RATE_LIMIT_PER_MINUTE=10

# Cache unified balance for X milliseconds
ARC_BALANCE_CACHE_TTL_MS=5000

# ============================================================================
# 11. Error Handling & Retries
# ============================================================================

# Maximum number of transfer retries
ARC_MAX_RETRIES=3

# Retry delay in milliseconds
ARC_RETRY_DELAY_MS=1000

# Retry backoff multiplier (exponential)
ARC_RETRY_BACKOFF_MULTIPLIER=2

# ============================================================================
# 12. Safety & Security
# ============================================================================

# Require manual approval for transfers > this amount (USDC)
ARC_MANUAL_APPROVAL_THRESHOLD=10000

# Enable additional security checks
ARC_ENABLE_SECURITY_CHECKS=true

# Whitelist specific wallets (JSON array)
# Leave empty for no whitelist
ARC_WALLET_WHITELIST=[]

# ============================================================================
# 13. Testing & Development
# ============================================================================

# Mock Circle API responses (for testing)
ARC_MOCK_CIRCLE_API=false

# Mock transfer delays (simulate network latency)
ARC_MOCK_TRANSFER_DELAY_MS=0

# Use test account
ARC_TEST_ACCOUNT_ADDRESS=0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb

# ============================================================================
# End of Configuration
# ============================================================================

# Notes:
# 1. Never commit real API keys - use .env.local for development
# 2. Fill in all REQUIRED fields before deploying
# 3. Test on Sepolia (testnet) before mainnet deployment
# 4. Keep Circle API keys secure and rotate regularly
# 5. Update ARC_TESTNET_MODE=false when deploying to production

# For questions or issues: See ARC_INTEGRATION_IMPLEMENTATION_GUIDE.md
